# План реализации: модуль отображения электронной конфигурации

## 1. Цель и пользовательский сценарий
- В модалке элемента добавляется **подсвеченная характеристика** (например, строка/бейдж `Электронная конфигурация`).
- Пользователь нажимает на неё → открывается **вторая модалка** (по стилю «продвинутой модалки»), в которой отображается полная электронная конфигурация.
- Визуализация конфигурации должна напоминать референс-скриншот (уровни/подуровни, ячейки орбиталей, стрелки электронов, краткая и полная запись).

## 2. Объём данных
### 2.1. Базовые поля для элемента
Добавить в `js/elements.js` (или отдельный файл с конфигурациями, если решим вынести):
- `electronConfigFull`: строка полной конфигурации (например, `1s² 2s² 2p⁶ 3s² 3p⁶ 3d⁶ 4s²`).
- `electronConfigShort`: строка сокращённой записи (например, `[Ar] 3d⁶ 4s²`).
- `valenceStates`: возможные степени окисления/валентности (например, `II, III`).

### 2.2. Таблица распределения по оболочкам
Для подписи типа `2e 8e 14e 2e` (как в примере):
- Добавить `shellDistribution`: массив чисел по оболочкам (например, `[2, 8, 14, 2]`).

### 2.3. Модель орбитального заполнения
Для построения «лестницы» орбиталей и стрелок:
- Добавить `orbitals`: массив объектов, описывающих подуровень:
  ```js
  [
    { n: 1, l: 's', electrons: 2 },
    { n: 2, l: 's', electrons: 2 },
    { n: 2, l: 'p', electrons: 6 },
    { n: 3, l: 's', electrons: 2 },
    { n: 3, l: 'p', electrons: 6 },
    { n: 3, l: 'd', electrons: 6 },
    { n: 4, l: 's', electrons: 2 }
  ]
  ```
- По этому массиву строится визуальная диаграмма (кол-во боксов = вместимость подуровня; количество стрелок = электроны).

## 3. UI/UX — изменения в модалке элемента
### 3.1. Подсвеченная характеристика
- В секции «Базовая информация» добавить строку:
  - **Label:** `Электронная конфигурация`
  - **Value:** сокращённая запись (`electronConfigShort`)
- Визуально подсветить (например, фон, легкая подсветка, иконка).
- Сделать элемент кликабельным (cursor: pointer).

### 3.2. Триггер открытия второй модалки
- Клик по строке вызывает открытие модалки конфигурации.
- Предусмотреть:
  - закрытие по клику на фон,
  - кнопку `✕`,
  - закрытие по `Esc`.

## 4. Новая модалка: “Электронная конфигурация”
### 4.1. Структура модалки
- Заголовок: `Строение атома <Элемент>`
- Левый блок:
  - символ элемента + заряд (если нужен)
  - распределение по оболочкам (например, `2e 8e 14e 2e`)
- Правый блок:
  - лестница орбиталей с боксовыми ячейками и стрелками
- Нижний блок:
  - `Валентные возможности — II, III`
  - `Краткая электронная формула — [Ar] 3d⁶ 4s²`

### 4.2. Визуальный стиль
- Стилистика должна быть близка к текущей «продвинутой модалке» (фон, тени, округления).
- Добавить иконку или визуальный акцент в заголовке.

### 4.3. Верстка орбиталей
- Каждому подуровню соответствует строка:
  - подпись слева (`1s²`, `2p⁶`, …)
  - ряд ячеек справа
- Правила:
  - `s` = 1 ячейка (2 электрона)
  - `p` = 3 ячейки (6 электронов)
  - `d` = 5 ячеек (10 электронов)
  - `f` = 7 ячеек (14 электронов)
- Стрелки рисуются по Hund-правилу:
  - сначала одиночные ↑, затем добавляем ↓.

## 5. Архитектура кода
### 5.1. Новый модуль
Создать новый модуль в `js/modules/`:
- `electron-config.js` — отвечает за:
  - рендер модалки
  - построение орбитальной схемы
  - бинды событий

### 5.2. Подключение
В `js/scrypt.js` или соответствующем загрузчике:
- Добавить подключение нового модуля при открытии модалки элемента.

### 5.3. Переиспользование “advanced modal”
- Логика открытия/закрытия может быть похожа на `js/solubility/advanced-modal.js`.
- Вынести общие утилиты, если потребуется (например, `modal-utils.js`).

## 6. Пошаговая реализация
1. **Данные:** добавить поля `electronConfigFull`, `electronConfigShort`, `shellDistribution`, `orbitals` для 5–10 элементов (MVP).
2. **UI в модалке элемента:** добавить кликабельную строку «Электронная конфигурация».
3. **Создать HTML-шаблон модалки** (скрыт по умолчанию).
4. **JS:** написать модуль `electron-config.js`:
   - генерация орбитальных строк;
   - вставка данных элемента;
   - обработчики открытия/закрытия.
5. **CSS:** стили для новой модалки и орбитальной диаграммы.
6. **Проверка адаптивности:** мобильная верстка (скролл, уменьшенные размеры).
7. **Расширение базы:** заполнить конфигурации для всех 118 элементов.

## 7. MVP-объём (минимум для запуска)
- 5–10 элементов с полной конфигурацией (H, He, O, Na, Fe, Cu).
- Базовая модалка с выводом:
  - заголовок,
  - краткая формула,
  - валентности,
  - орбитальная диаграмма.

## 8. Риски и ограничения
- Полная база конфигураций на 118 элементов — объёмная задача.
- Сложности с экзотическими конфигурациями (исключения типа Cr, Cu, Mo и т.д.).
- Необходимо согласовать стиль модалки с текущими UI-компонентами.

## 9. Тестирование
- Ручная проверка в браузере:
  - открытие/закрытие модалки;
  - корректность отрисовки стрелок;
  - адаптивность на мобильном.
- Сравнение с референсом (на примере Fe).

## 10. Итоговый результат
После внедрения пользователь сможет открыть расширенное окно электронной конфигурации любого элемента и увидеть:
- полную электронную формулу,
- распределение по оболочкам,
- диаграмму орбиталей,
- валентные возможности.

