/* =========================================
   THEME.CSS — Тёмная тема и переключатель
   ========================================= */

/* =========================================
   ПЕРЕКЛЮЧАТЕЛЬ ТЕМЫ
   ========================================= */
#theme-toggle {
   position: fixed;
   top: 20px;
   right: 20px;
   width: 50px;
   height: 50px;
   border-radius: 50%;
   border: none;
   background: #333;
   color: white;
   cursor: pointer;
   z-index: 5000;
   transition: transform 0.2s, background 0.3s;
   box-shadow: 0 2px 10px rgba(0,0,0,0.2);
   display: flex;
   align-items: center;
   justify-content: center;
}

#theme-toggle svg {
    width: 28px;
    height: 28px;
    display: block;
    margin: 0;
    padding: 0;
    pointer-events: none;
    stroke: currentColor;
    fill: none;
}

#theme-toggle:hover {
    transform: scale(1.1);
}

#theme-toggle:active {
    transform: scale(0.9);
}

#theme-toggle.spin {
    animation: spinIcon 0.4s ease-out;
}

#theme-toggle .icon-moon {
    display: block !important;
    width: 100%;
    height: 100%;
}

#theme-toggle .icon-sun {
    display: none !important;
    width: 100%;
    height: 100%;
}

body.dark-theme #theme-toggle .icon-moon {
    display: none !important;
}

body.dark-theme #theme-toggle .icon-sun {
    display: block !important;
    width: 100%;
    height: 100%;
}

/* =========================================
   ВОЛНА СМЕНЫ ТЕМЫ
   ========================================= */
.theme-wave-circle {
    position: fixed;
    width: 0;
    height: 0;
    border-radius: 50%;
    pointer-events: none;
    z-index: 0;  /* Повышаем z-index, чтобы волна была поверх частиц, но ниже элементов таблицы */
    transform: translate(-50%, -50%);
}

.theme-wave-circle.expand {
    animation: waveExpand 0.8s linear forwards;
}

.theme-wave-circle.background {
    width: 400vmax;
    height: 400vmax;
    animation: none;
}

@keyframes waveExpand {
    0% { transform: translate(-50%, -50%) scale(0); }
    100% { transform: translate(-50%, -50%) scale(1); }
}

/* =========================================
   ТЁМНАЯ ТЕМА — БАЗОВЫЕ СТИЛИ
   ========================================= */
body.dark-theme {
    background-color: transparent;
}

body.dark-theme #theme-toggle {
    background: #f0f0f0;
    color: #1a1a2e;
}

/* --- Элементы таблицы --- */
body.dark-theme .element {
    background-color: #2d2d44;
    border-color: #444;
    color: #eee;
}

body.dark-theme .element:hover {
    background-color: #3d3d5c;
}

body.dark-theme .element .name {
    color: #ccc;
}

/* --- Цвета категорий (тёмная тема) --- */
body.dark-theme .alkali-metal { background-color: #8b3a3a; }
body.dark-theme .alkaline-earth-metal { background-color: #8b6914; }
body.dark-theme .transition-metal { background-color: #7a7a2e; }
body.dark-theme .post-transition-metal { background-color: #4a7a2e; }
body.dark-theme .metalloid { background-color: #2e7a5c; }
body.dark-theme .nonmetal { background-color: #2e6a7a; }
body.dark-theme .halogen { background-color: #2e4a7a; }
body.dark-theme .noble-gas { background-color: #5c2e7a; }
body.dark-theme .lanthanide { background-color: #7a2e5c; }
body.dark-theme .actinide { background-color: #7a2e7a; }
body.dark-theme .unknown { background-color: #4a4a4a; }

/* =========================================
   ТЁМНАЯ ТЕМА — МОДАЛЬНОЕ ОКНО
   ========================================= */
body.dark-theme .modal {
    background-color: rgba(0, 0, 0, 0.7);
}

body.dark-theme .modal-content {
    background-color: #0a0a0f;
    color: #eee;
}

body.dark-theme .close {
    color: #888;
}

body.dark-theme .close:hover {
    color: #fff;
}

body.dark-theme #element-title {
    color: #eee;
}

/* --- Секции (тёмная тема) --- */
body.dark-theme .info-group.basic {
    background: #0d2137;
    border-left-color: #2196F3;
}

body.dark-theme .info-group.physical {
    background: #0d2917;
    border-left-color: #4CAF50;
}

body.dark-theme .info-group.history {
    background: #2e2410;
    border-left-color: #FF9800;
}

body.dark-theme .info-group.facts {
    background: #1f0d29;
    border-left-color: #9C27B0;
}

body.dark-theme .group-title {
    color: #aaa;
}

body.dark-theme .group-content p {
    color: #ccc;
}

body.dark-theme .group-content strong {
    color: #fff;
}

/* =========================================
   АНИМАЦИЯ ПЕРЕХОДА ТЕМЫ
   ========================================= */

/* Переход в тёмную тему */
.element.to-dark {
    background-color: #2d2d44 !important;
    border-color: #444 !important;
    color: #eee !important;
    transition: all 0.15s ease-out;
}

.element.to-dark .name {
    color: #ccc !important;
}

.element.alkali-metal.to-dark { background-color: #8b3a3a !important; }
.element.alkaline-earth-metal.to-dark { background-color: #8b6914 !important; }
.element.transition-metal.to-dark { background-color: #7a7a2e !important; }
.element.post-transition-metal.to-dark { background-color: #4a7a2e !important; }
.element.metalloid.to-dark { background-color: #2e7a5c !important; }
.element.nonmetal.to-dark { background-color: #2e6a7a !important; }
.element.halogen.to-dark { background-color: #2e4a7a !important; }
.element.noble-gas.to-dark { background-color: #5c2e7a !important; }
.element.lanthanide.to-dark { background-color: #7a2e5c !important; }
.element.actinide.to-dark { background-color: #7a2e7a !important; }
.element.unknown.to-dark { background-color: #4a4a4a !important; }

/* Переход в светлую тему */
body.dark-theme .element.to-light {
    border-color: #ccc !important;
    color: #000 !important;
    transition: all 0.15s ease-out;
}

body.dark-theme .element.to-light .name {
    color: #333 !important;
}

body.dark-theme .element.alkali-metal.to-light { background-color: #ff9999 !important; }
body.dark-theme .element.alkaline-earth-metal.to-light { background-color: #ffcc99 !important; }
body.dark-theme .element.transition-metal.to-light { background-color: #ffff99 !important; }
body.dark-theme .element.post-transition-metal.to-light { background-color: #ccff99 !important; }
body.dark-theme .element.metalloid.to-light { background-color: #99ffcc !important; }
body.dark-theme .element.nonmetal.to-light { background-color: #99ffff !important; }
body.dark-theme .element.halogen.to-light { background-color: #99ccff !important; }
body.dark-theme .element.noble-gas.to-light { background-color: #cc99ff !important; }
body.dark-theme .element.lanthanide.to-light { background-color: #ff99cc !important; }
body.dark-theme .element.actinide.to-light { background-color: #ff99ff !important; }
body.dark-theme .element.unknown.to-light { background-color: #cccccc !important; }

/* =========================================
   АДАПТИВ
   ========================================= */
@media (max-width: 1024px) {
    #theme-toggle {
        position: fixed;
        bottom: 20px;
        left: 20px;
        width: 40px !important;
        height: 40px !important;
        font-size: 20px;
        z-index: 5000;
        box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }

    /* Увеличиваем SVG иконку для лучшей видимости на iPhone */
    #theme-toggle svg {
        width: 28px !important;  /* Увеличиваем размер иконки */
        height: 28px !important;
        stroke: currentColor !important;
        fill: currentColor !important;  /* Добавляем fill для надежности */
        color: inherit !important;
        display: block !important;
        margin: auto !important;  /* Центрируем иконку */
    }

    /* Явно показываем иконку луны на светлой теме */
    #theme-toggle .icon-moon {
        display: block !important;
        opacity: 1 !important;
        visibility: visible !important;
    }

    /* Явно скрываем иконку солнца на светлой теме */
    #theme-toggle .icon-sun {
        display: none !important;
    }

    /* Дополнительные стили для обеспечения видимости иконки */
    #theme-toggle .icon-moon,
    #theme-toggle .icon-sun {
        width: 100% !important;
        height: 100% !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        min-width: 24px !important;
        min-height: 24px !important;
    }

    /* Дополнительные стили для iPhone - увеличиваем размер иконки темы */
    body.device-iphone #theme-toggle svg {
        width: 32px !important;  /* Увеличиваем размер иконки на iPhone */
        height: 32px !important;
        min-width: 32px !important;
        min-height: 32px !important;
    }

    body.dark-theme .modal {
      background: rgba(0,0,0,0.3);
    }

    body.dark-theme .modal-content {
        background: rgba(26, 26, 46, 0.75);
        border-bottom-color: #64B5F6;
    }

    body.dark-theme .close {
        background: rgba(255,255,255,0.1);
        color: #ccc;
    }

    body.dark-theme #element-title {
        border-bottom-color: rgba(255,255,255,0.1);
    }

    body.dark-theme .info-group {
        background: #151525;
    }
}

/* Горизонтальная ориентация */
@media (max-width: 768px) and (orientation: landscape) {
    #theme-toggle {
        top: 5px;
        left: 5px;
        width: 36px;
        height: 36px;
        font-size: 18px;
    }
}

/* Скрываем кнопку темы на мобильных при открытой таблице растворимости */
@media (max-width: 1024px) {
    body.solubility-open #theme-toggle {
        opacity: 0;
        pointer-events: none;
    }
}

/* Светлая тема — только луна */
#theme-toggle .icon-sun {
  display: none !important;
}

/* Тёмная тема — только солнце */
body.dark-theme #theme-toggle .icon-moon {
  display: none !important;
}