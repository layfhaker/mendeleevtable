# План реализации: интерактивные частицы, реагирующие на мышку

## 1. Цель и пользовательский сценарий
- Фоновая система частиц становится **интерактивной**: реагирует на позицию курсора.
- При движении мыши частицы **отталкиваются**, **притягиваются** или **искажают траектории** (настраиваемые режимы).
- Эффект должен быть лёгким, не мешать чтению контента, и не снижать производительность.

## 2. Текущий контекст и точка интеграции
- Система частиц находится в `js/particles.js` (Canvas-анимация фона).
- Нужно расширить текущую логику рендера, добавив обработчики `mousemove`, `mouseleave`, `touchmove`.
- Важно сохранить работу на мобильных (тач) и в PWA-режиме.

## 3. Поведение и режимы интерактивности
### 3.1. Базовый режим (MVP)
- При приближении курсора к частице она **слегка отталкивается**.
- Сила воздействия падает по мере удаления от курсора.

### 3.2. Дополнительные режимы (опционально)
- **Притяжение** (магнитный эффект).
- **Вихрь** (частицы закручиваются вокруг курсора).
- **Слабая турбулентность** (мелкие колебания скоростей при близком расстоянии).

## 4. Данные и параметры
Добавить настройки в `js/particles.js` (или вынести в конфиг):
- `mouseRadius` — радиус влияния.
- `mouseForce` — базовая сила воздействия.
- `interactionMode` — `repel | attract | vortex`.
- `maxVelocity` — ограничение скорости, чтобы не было «вылетов».
- `damping` — коэффициент затухания.

## 5. Алгоритм воздействия
### 5.1. Вычисление силы
- Для каждой частицы вычисляется расстояние до курсора.
- Если расстояние < `mouseRadius`, то:
  - направление силы = вектор от курсора к частице (или наоборот при притяжении);
  - сила = `mouseForce * (1 - distance / mouseRadius)`.

### 5.2. Обновление скорости
- `vx += forceX`
- `vy += forceY`
- далее применить `damping` и `maxVelocity`.

### 5.3. Вихревой режим (опционально)
- Вектор силы вращается на 90° относительно радиального направления.

## 6. Обработчики событий
Добавить:
- `mousemove` → обновляет координаты `mouse.x`, `mouse.y`.
- `mouseleave` → деактивирует взаимодействие (например, `mouse.active = false`).
- `touchmove` → аналог `mousemove`.
- `touchend` → деактивация.

## 7. UX-полировка
- Эффект должен быть **деликатным**: частицы не должны «разлетаться» слишком сильно.
- При отсутствии движения мыши воздействие должно исчезать.
- В мобильной версии эффект можно сделать слабее или отключать полностью.

## 8. Пошаговая реализация
1. Добавить объект `mouse` в `js/particles.js`:
   ```js
   const mouse = { x: 0, y: 0, active: false };
   ```
2. Подключить обработчики `mousemove`, `mouseleave`, `touchmove`, `touchend`.
3. В основном цикле анимации добавить расчет влияния курсора на каждую частицу.
4. Добавить параметры `mouseRadius`, `mouseForce`, `maxVelocity`, `damping`.
5. Протестировать на десктопе и мобильном.

## 9. MVP-объём
- Реализовать **один режим** (отталкивание).
- Поддержка `mousemove` и `touchmove`.
- Лёгкая настройка радиуса и силы.

## 10. Риски и ограничения
- Большое количество частиц может влиять на FPS.
- Нужно избегать резких скачков скорости.
- Важно оптимизировать вычисление расстояний.

## 11. Тестирование
- Проверить FPS в Chrome/Firefox (DevTools Performance).
- Проверить корректность на мобильных (touch).
- Убедиться, что эффекты не мешают чтению контента.

## 12. Итоговый результат
После внедрения пользователь получает живой интерактивный фон, где частицы визуально реагируют на курсор или касания, сохраняя плавность и лёгкость интерфейса.
