// =========================================
// ДАННЫЕ ТАБЛИЦЫ РАСТВОРИМОСТИ
// =========================================

// =========================================
// РЕАЛЬНЫЕ ЦВЕТА ВЕЩЕСТВ
// =========================================
const substanceColors = {
    // =============================================
    // БЕЛЫЕ ОСАДКИ (white)
    // =============================================
    // Галогениды
    "Ag+-Cl-": "white",           // AgCl - белый творожистый
    "Pb2+-Cl-": "white",          // PbCl₂ - белый
    "Pb2+-Br-": "white",          // PbBr₂ - белый
    "Hg2+-Cl-": "white",          // Hg₂Cl₂ - белый (каломель)

    // Сульфаты
    "Ba2+-SO42-": "white",        // BaSO₄ - белый (барит)
    "Pb2+-SO42-": "white",        // PbSO₄ - белый
    "Ca2+-SO42-": "white",        // CaSO₄ - белый (гипс)
    "Sr2+-SO42-": "white",        // SrSO₄ - белый
    "Ag+-SO42-": "white",         // Ag₂SO₄ - белый

    // Карбонаты
    "Ca2+-CO32-": "white",        // CaCO₃ - белый (мел, мрамор)
    "Ba2+-CO32-": "white",        // BaCO₃ - белый
    "Mg2+-CO32-": "white",        // MgCO₃ - белый
    "Sr2+-CO32-": "white",        // SrCO₃ - белый
    "Pb2+-CO32-": "white",        // PbCO₃ - белый
    "Zn2+-CO32-": "white",        // ZnCO₃ - белый

    // Фосфаты
    "Ca2+-PO43-": "white",        // Ca₃(PO₄)₂ - белый
    "Ba2+-PO43-": "white",        // Ba₃(PO₄)₂ - белый
    "Mg2+-PO43-": "white",        // Mg₃(PO₄)₂ - белый
    "Zn2+-PO43-": "white",        // Zn₃(PO₄)₂ - белый
    "Pb2+-PO43-": "white",        // Pb₃(PO₄)₂ - белый
    "Al3+-PO43-": "white",        // AlPO₄ - белый

    // Силикаты
    "Ca2+-SiO32-": "white",       // CaSiO₃ - белый
    "Ba2+-SiO32-": "white",       // BaSiO₃ - белый
    "Mg2+-SiO32-": "white",       // MgSiO₃ - белый
    "Zn2+-SiO32-": "white",       // ZnSiO₃ - белый

    // Сульфиты
    "Ca2+-SO32-": "white",        // CaSO₃ - белый
    "Ba2+-SO32-": "white",        // BaSO₃ - белый
    "Pb2+-SO32-": "white",        // PbSO₃ - белый

    // Гидроксиды белые
    "Al3+-OH-": "white",          // Al(OH)₃ - белый студенистый
    "Zn2+-OH-": "white",          // Zn(OH)₂ - белый
    "Mg2+-OH-": "white",          // Mg(OH)₂ - белый
    "Ca2+-OH-": "white",          // Ca(OH)₂ - белый (известь)
    "Ba2+-OH-": "white",          // Ba(OH)₂ - белый
    "Sn2+-OH-": "white",          // Sn(OH)₂ - белый

    // Сульфид цинка
    "Zn2+-S2-": "white",          // ZnS - белый

    // Фториды
    "Ca2+-F-": "white",           // CaF₂ - белый (флюорит)
    "Ba2+-F-": "white",           // BaF₂ - белый
    "Mg2+-F-": "white",           // MgF₂ - белый
    "Sr2+-F-": "white",           // SrF₂ - белый
    "Pb2+-F-": "white",           // PbF₂ - белый

    // =============================================
    // БЕСЦВЕТНЫЕ РАСТВОРЫ (colorless)
    // =============================================
    // Нитраты (все растворимы и бесцветны, кроме окрашенных катионов)
    "Na+-NO3-": "colorless",
    "K+-NO3-": "colorless",
    "Ca2+-NO3-": "colorless",
    "Ba2+-NO3-": "colorless",
    "Mg2+-NO3-": "colorless",
    "Zn2+-NO3-": "colorless",
    "Pb2+-NO3-": "colorless",
    "Al3+-NO3-": "colorless",
    "Ag+-NO3-": "colorless",

    // Хлориды растворимые
    "Na+-Cl-": "colorless",
    "K+-Cl-": "colorless",
    "Ca2+-Cl-": "colorless",
    "Ba2+-Cl-": "colorless",
    "Mg2+-Cl-": "colorless",
    "Zn2+-Cl-": "colorless",
    "Al3+-Cl-": "colorless",

    // Сульфаты растворимые
    "Na+-SO42-": "colorless",
    "K+-SO42-": "colorless",
    "Mg2+-SO42-": "colorless",
    "Zn2+-SO42-": "colorless",
    "Al3+-SO42-": "colorless",

    // Ацетаты
    "Na+-CH3COO-": "colorless",
    "K+-CH3COO-": "colorless",
    "Ca2+-CH3COO-": "colorless",
    "Ba2+-CH3COO-": "colorless",
    "Mg2+-CH3COO-": "colorless",
    "Zn2+-CH3COO-": "colorless",
    "Pb2+-CH3COO-": "colorless",
    "Al3+-CH3COO-": "colorless",

    // =============================================
    // ЖЁЛТЫЕ И ОРАНЖЕВЫЕ
    // =============================================
    "Ag+-Br-": "#fffacd",         // AgBr - бледно-жёлтый
    "Ag+-I-": "#ffd700",          // AgI - жёлтый
    "Pb2+-I-": "#ffd700",         // PbI₂ - золотисто-жёлтый ("золотой дождь")
    "Hg2+-I-": "#ff4500",         // HgI₂ - красный (алый)
    "Ag+-PO43-": "#ffff00",       // Ag₃PO₄ - жёлтый
    "Cd2+-S2-": "#ffa500",        // CdS - оранжево-жёлтый

    // Хроматы
    "Ba2+-CrO42-": "#ffff00",     // BaCrO₄ - жёлтый
    "Pb2+-CrO42-": "#ffa500",     // PbCrO₄ - оранжево-жёлтый
    "Sr2+-CrO42-": "#ffff00",     // SrCrO₄ - жёлтый
    "Ca2+-CrO42-": "#ffff00",     // CaCrO₄ - жёлтый
    "Ag+-CrO42-": "#8b0000",      // Ag₂CrO₄ - кирпично-красный

    // Дихроматы (оранжевые растворы/осадки)
    "K+-Cr2O72-": "#ff8c00",      // K₂Cr₂O₇ - оранжевый раствор
    "Na+-Cr2O72-": "#ff8c00",     // Na₂Cr₂O₇ - оранжевый раствор
    "NH4+-Cr2O72-": "#ff8c00",    // (NH₄)₂Cr₂O₇ - оранжевый раствор
    "Ag+-Cr2O72-": "#dc143c",     // Ag₂Cr₂O₇ - малорастворимый красный
    "Pb2+-Cr2O72-": "#ff4500",    // PbCr₂O₇ - малорастворимый оранжево-красный

    // Соли железа(III) - желто-бурые из-за гидролиза
    "Fe3+-Cl-": "#cd853f",        // FeCl₃ - жёлто-бурый (гидролиз)
    "Fe3+-SO42-": "#cd853f",      // Fe₂(SO₄)₃ - жёлто-бурый (гидролиз)
    "Fe3+-NO3-": "#cd853f",       // Fe(NO₃)₃ - жёлто-бурый (гидролиз)

    // =============================================
    // ГОЛУБЫЕ И СИНИЕ
    // =============================================
    "Cu2+-OH-": "#87ceeb",        // Cu(OH)₂ - голубой
    "Cu2+-SO42-": "#87ceeb",      // CuSO₄ - голубой
    "Cu2+-NO3-": "#87ceeb",       // Cu(NO₃)₂ - голубой
    "Cu2+-Cl-": "#48d1cc",        // CuCl₂ - сине-зелёный
    "Cu2+-CO32-": "#228b22",      // CuCO₃ - зелёный (малахит)

    // =============================================
    // ЗЕЛЁНЫЕ
    // =============================================
    "Fe2+-OH-": "#90ee90",        // Fe(OH)₂ - светло-зелёный (темнеет на воздухе)
    "Ni2+-OH-": "#90ee90",        // Ni(OH)₂ - светло-зелёный
    "Ni2+-SO42-": "#90ee90",      // NiSO₄ - зелёный
    "Ni2+-Cl-": "#90ee90",        // NiCl₂ - зелёный
    "Ni2+-NO3-": "#90ee90",       // Ni(NO₃)₂ - зелёный
    "Cr3+-OH-": "#7fffd4",        // Cr(OH)₃ - серо-зелёный
    "Cr3+-Cl-": "#228b22",        // CrCl₃·6H₂O - тёмно-зелёный (гидрат)

    // =============================================
    // БУРЫЕ И КОРИЧНЕВЫЕ
    // =============================================
    "Fe3+-OH-": "#8b4513",        // Fe(OH)₃ - бурый
    "Sn2+-S2-": "#8b4513",        // SnS - коричневый

    // =============================================
    // РОЗОВЫЕ
    // =============================================
    "Co2+-OH-": "#ff69b4",        // Co(OH)₂ - розовый
    "Co2+-Cl-": "#ff69b4",        // CoCl₂ - розовый
    "Co2+-NO3-": "#ff69b4",       // Co(NO₃)₂ - розовый
    "Co2+-SO42-": "#ff69b4",      // CoSO₄ - розовый
    "Mn2+-SO42-": "#ffb6c1",      // MnSO₄ - бледно-розовый
    "Mn2+-S2-": "#ffb6c1",        // MnS - розовый

    // =============================================
    // ФИОЛЕТОВЫЕ
    // =============================================
    "K+-MnO4-": "#8b008b",        // KMnO₄ - тёмно-фиолетовый
    "Na+-MnO4-": "#8b008b",       // NaMnO₄ - тёмно-фиолетовый
    "Cr3+-SO42-": "#228b22",      // Cr₂(SO₄)₃ - зелёный (практический цвет)

    // =============================================
    // ЧЁРНЫЕ
    // =============================================
    "Ag+-S2-": "#000000",         // Ag₂S - чёрный
    "Pb2+-S2-": "#000000",        // PbS - чёрный (галенит)
    "Cu2+-S2-": "#000000",        // CuS - чёрный
    "Fe2+-S2-": "#000000",        // FeS - чёрный
    "Ni2+-S2-": "#000000",        // NiS - чёрный
    "Co2+-S2-": "#000000",        // CoS - чёрный
    "Hg2+-S2-": "#000000",        // HgS - чёрный (или красный киноварь)

    // =============================================
    // ДОПОЛНИТЕЛЬНЫЕ ЦВЕТНЫЕ СОЛИ
    // =============================================
    // Медь — голубые
    "Cu2+-CH3COO-": "#87ceeb",    // Cu(CH₃COO)₂ - голубой
    "Cu2+-PO43-": "#87ceeb",      // Cu₃(PO₄)₂ - голубой

    // Никель — зелёные
    "Ni2+-CO32-": "#90ee90",      // NiCO₃ - зелёный
    "Ni2+-PO43-": "#90ee90",      // Ni₃(PO₄)₂ - зелёный
    "Ni2+-CH3COO-": "#90ee90",    // Ni(CH₃COO)₂ - зелёный

    // Кобальт — розовые
    "Co2+-CO32-": "#ff69b4",      // CoCO₃ - розовый
    "Co2+-PO43-": "#ff69b4",      // Co₃(PO₄)₂ - розовый
    "Co2+-CH3COO-": "#ff69b4",    // Co(CH₃COO)₂ - розовый

    // Хром — зелёные (практический цвет)
    "Cr3+-NO3-": "#228b22",       // Cr(NO₃)₃ - зелёный (практический цвет)
    "Cr3+-CH3COO-": "#228b22",    // Cr(CH₃COO)₃ - зелёный

    // Железо(II) — бледно-зелёные
    "Fe2+-SO42-": "#98fb98",      // FeSO₄ - бледно-зелёный
    "Fe2+-Cl-": "#98fb98",        // FeCl₂ - бледно-зелёный
    "Fe2+-NO3-": "#98fb98",       // Fe(NO₃)₂ - бледно-зелёный
    "Fe2+-CO32-": "#778899",      // FeCO₃ - серо-зелёный

    // Марганец — бледно-розовые (только растворимые!)
    "Mn2+-Cl-": "#ffb6c1",        // MnCl₂ - бледно-розовый
    "Mn2+-NO3-": "#ffb6c1",       // Mn(NO₃)₂ - бледно-розовый
    "Mn2+-CH3COO-": "#ffb6c1",    // Mn(CH₃COO)₂ - бледно-розовый
};

const solubilityData = {
    // 24 Катиона (Полный набор)
    cations: [
        { f: "H⁺", n: "Водород" },
        { f: "NH₄⁺", n: "Аммоний" },
        { f: "Li⁺", n: "Литий" },
        { f: "K⁺", n: "Калий" },
        { f: "Na⁺", n: "Натрий" },
        { f: "Rb⁺", n: "Рубидий" },
        { f: "Cs⁺", n: "Цезий" },
        { f: "Ag⁺", n: "Серебро" },
        { f: "Mg²⁺", n: "Магний" },
        { f: "Ca²⁺", n: "Кальций" },
        { f: "Sr²⁺", n: "Стронций" },
        { f: "Ba²⁺", n: "Барий" },
        { f: "Zn²⁺", n: "Цинк" },
        { f: "Hg²⁺", n: "Ртуть" },
        { f: "Pb²⁺", n: "Свинец" },
        { f: "Cu²⁺", n: "Медь" },
        { f: "Fe²⁺", n: "Железо(II)" },
        { f: "Fe³⁺", n: "Железо(III)" },
        { f: "Al³⁺", n: "Алюминий" },
        { f: "Cr³⁺", n: "Хром" },
        { f: "Mn²⁺", n: "Марганец" },
        { f: "Ni²⁺", n: "Никель" },
        { f: "Co²⁺", n: "Кобальт" },
        { f: "Sn²⁺", n: "Олово" }
    ],

    // 22 Анионов (расширено)
    anions: [
        { f: "OH⁻", n: "Гидроксид" },
        { f: "F⁻",  n: "Фторид" },
        { f: "Cl⁻", n: "Хлорид" },
        { f: "Br⁻", n: "Бромид" },
        { f: "I⁻",  n: "Иодид" },
        { f: "S²⁻", n: "Сульфид" },
        { f: "HS⁻", n: "Гидросульфид" },
        { f: "SO₃²⁻", n: "Сульфит" },
        { f: "SO₄²⁻", n: "Сульфат" },
        { f: "NO₃⁻", n: "Нитрат" },
        { f: "PO₄³⁻", n: "Фосфат" },
        { f: "CO₃²⁻", n: "Карбонат" },
        { f: "SiO₃²⁻", n: "Силикат" },
        { f: "CrO₄²⁻", n: "Хромат" },
        { f: "Cr₂O₇²⁻", n: "Дихромат" },
        { f: "AlO₂⁻", n: "Алюминат" },
        { f: "ZnO₂²⁻", n: "Цинкат" },
        { f: "PbO₂²⁻", n: "Плюмбат" },
        { f: "CrO₂⁻", n: "Хромит" },
        { f: "SnO₃²⁻", n: "Станнат" },
        { f: "CH₃COO⁻", n: "Ацетат" },
        { f: "MnO₄⁻", n: "Перманганат" }
    ],

    // ПРАВИЛА ПО УМОЛЧАНИЮ (по Лурье)
    defaults: {
        "OH-": "N",      // Гидроксиды нерастворимы
        "F-": "R",       // Фториды растворимы
        "Cl-": "R",      // Хлориды растворимы
        "Br-": "R",      // Бромиды растворимы
        "I-": "R",       // Йодиды растворимы
        "S2-": "N",      // Сульфиды нерастворимы
        "HS-": "R",      // Гидросульфиды растворимы
        "SO32-": "R",    // Сульфиты растворимы
        "SO42-": "R",    // Сульфаты растворимы
        "NO3-": "R",     // Нитраты все растворимы
        "PO43-": "N",    // Фосфаты нерастворимы
        "CO32-": "N",    // Карбонаты нерастворимы
        "SiO32-": "N",   // Силикаты нерастворимы
        "CrO42-": "R",   // Хроматы растворимы
        "Cr2O72-": "R",  // Дихроматы растворимы
        "AlO2-": "R",    // Алюминаты растворимы (в щелочах)
        "ZnO22-": "R",   // Цинкаты растворимы (в щелочах)
        "PbO22-": "R",   // Плюмбаты растворимы (в щелочах)
        "CrO2-": "R",    // Хромиты растворимы (в щелочах)
        "SnO32-": "R",   // Станнаты растворимы (в щелочах)
        "CH3COO-": "R",  // Ацетаты растворимы
        "MnO4-": "R"     // Перманганаты растворимы
    },

    // ИСКЛЮЧЕНИЯ (только отклонения от правил по умолчанию)
    // Источник: Лурье Ю.Ю. "Справочник по аналитической химии"
    exceptions: {
        // === ГИДРОКСИДЫ (по умолчанию N) ===
        "H+-OH-": "O",         // Не существует (вода)
        "NH4+-OH-": "R",       // Растворим
        "Li+-OH-": "R",        // Растворим
        "K+-OH-": "R",         // Растворим
        "Na+-OH-": "R",        // Растворим
        "Rb+-OH-": "R",        // Растворим
        "Cs+-OH-": "R",        // Растворим
        "Ca2+-OH-": "M",       // Малорастворим (известковая вода)
        "Sr2+-OH-": "M",       // Малорастворим
        "Ba2+-OH-": "R",       // РАСТВОРИМ (важно!)
        "Ag+-OH-": "D",
        "Hg2+-OH-": "D",     // Разлагается → Ag2O

        // === ФТОРИДЫ (по умолчанию R) ===
        "Li+-F-": "M",
        "Mg2+-F-": "N",        // Нерастворим
        "Ca2+-F-": "N",        // Нерастворим (флюорит)
        "Sr2+-F-": "N",        // Малорастворим
        "Ba2+-F-": "M",        // Малорастворим
        "Pb2+-F-": "N",        // Нерастворим
        "Ag+-F-": "R",         // Растворим (исключение из правила для солей Ag⁺)
        "Al3+-F-": "M",
        "Cr3+-F-": "N",
        "Fe2+-F-": "N",
        "Fe3+-F-": "N",
        "Hg2+-F-": "D",

        // === ХЛОРИДЫ (по умолчанию R) ===
        "Ag+-Cl-": "N",        // Нерастворим
        "Pb2+-Cl-": "M",       // Малорастворим (растворимость сильно зависит от температуры)
        "Hg2+-Cl-": "N",       // Hg2Cl2 нерастворим

        // === БРОМИДЫ (по умолчанию R) ===
        "Ag+-Br-": "N",        // Нерастворим
        "Pb2+-Br-": "M",       // Малорастворим
        "Hg2+-Br-": "N",       // Нерастворим

        // === ЙОДИДЫ (по умолчанию R) ===
        "Ag+-I-": "N",         // Нерастворим
        "Pb2+-I-": "N",        // Нерастворим (золотой дождь)
        "Hg2+-I-": "N",        // Нерастворим (красный HgI2)
        "Cu2+-I-": "D",        // Разлагается: 2Cu2+ + 4I- → 2CuI↓ + I2

        // === СУЛЬФИДЫ (по умолчанию N) ===
        "H+-S2-": "R",         // H2S растворим
        "NH4+-S2-": "R",       // Растворим
        "Li+-S2-": "R",        // Растворим
        "K+-S2-": "R",         // Растворим
        "Na+-S2-": "R",        // Растворим
        "Rb+-S2-": "R",        // Растворим
        "Cs+-S2-": "R",        // Растворим
        "Mg2+-S2-": "D",       // Гидролиз
        "Ca2+-S2-": "D",       // Гидролиз
        "Sr2+-S2-": "D",       // Гидролиз
        "Ba2+-S2-": "D",       // Гидролиз
        "Al3+-S2-": "D",       // Гидролиз
        "Cr3+-S2-": "D",       // Гидролиз
        "Fe3+-S2-": "D",       // Гидролиз

        // === ГИДРОСУЛЬФИДЫ (по умолчанию R) ===
        "Ag+-HS-": "N",        // Нерастворим
        "Hg2+-HS-": "N",       // Нерастворим
        "Pb2+-HS-": "N",       // Нерастворим
        "Cu2+-HS-": "N",       // Нерастворим
        "Fe3+-HS-": "D",       // Гидролиз
        "Al3+-HS-": "D",       // Гидролиз
        "Cr3+-HS-": "D",       // Гидролиз
        "Sn2+-HS-": "D",       // Гидролиз

        // === СУЛЬФИТЫ (по умолчанию R) ===
        "Ag+-SO32-": "M",      // Малорастворим
        "Mg2+-SO32-": "M",     // Малорастворим
        "Ca2+-SO32-": "M",     // Малорастворим
        "Sr2+-SO32-": "N",     // Нерастворим
        "Ba2+-SO32-": "N",     // Нерастворим
        "Pb2+-SO32-": "N",     // Нерастворим
        "Al3+-SO32-": "D",     // Гидролиз
        "Cr3+-SO32-": "D",     // Гидролиз
        "Fe3+-SO32-": "D",     // Гидролиз

        // === СУЛЬФАТЫ (по умолчанию R) ===
        "Ca2+-SO42-": "M",     // Малорастворим (гипс)
        "Sr2+-SO42-": "N",     // Нерастворим
        "Ba2+-SO42-": "N",     // Нерастворим (барит)
        "Pb2+-SO42-": "N",     // Нерастворим
        "Ag+-SO42-": "M",      // Малорастворим
        "Hg2+-SO42-": "M",     // Малорастворим

        // === ФОСФАТЫ (по умолчанию N) ===
        "H+-PO43-": "R",       // Растворим
        "NH4+-PO43-": "R",     // Растворим
        "Li+-PO43-": "R",      // Растворим
        "K+-PO43-": "R",       // Растворим
        "Na+-PO43-": "R",      // Растворим
        "Rb+-PO43-": "R",      // Растворим
        "Cs+-PO43-": "R",      // Растворим
        "Ag+-PO43-": "N",      // Нерастворим (жёлтый осадок)

        // === КАРБОНАТЫ (по умолчанию N) ===
        "H+-CO32-": "D",       // Разлагается (H2CO3 → CO2 + H2O)
        "NH4+-CO32-": "R",     // Растворим
        "Li+-CO32-": "R",      // Растворим
        "K+-CO32-": "R",       // Растворим
        "Na+-CO32-": "R",      // Растворим
        "Rb+-CO32-": "R",      // Растворим
        "Cs+-CO32-": "R",      // Растворим
        "Al3+-CO32-": "D",     // Гидролиз
        "Cr3+-CO32-": "D",     // Гидролиз
        "Fe3+-CO32-": "D",     // Гидролиз
        "Fe2+-CO32-": "N",     // Нерастворим (серо-зелёный осадок)

        // === СИЛИКАТЫ (по умолчанию N) ===
        "H+-SiO32-": "N",      // H2SiO3 нерастворим (гель кремниевой кислоты)
        "NH4+-SiO32-": "R",    // Растворим
        "Li+-SiO32-": "R",     // Растворим
        "K+-SiO32-": "R",      // Растворим (жидкое стекло)
        "Na+-SiO32-": "R",     // Растворим (жидкое стекло)
        "Rb+-SiO32-": "R",     // Растворим
        "Cs+-SiO32-": "R",     // Растворим
        "Al3+-SiO32-": "D",    // Гидролиз
        "Cr3+-SiO32-": "D",    // Гидролиз
        "Fe3+-SiO32-": "D",    // Гидролиз

        // === ХРОМАТЫ (по умолчанию R) ===
        "Ag+-CrO42-": "N",     // Нерастворим (кирпично-красный)
        "Pb2+-CrO42-": "N",    // Нерастворим (оранжево-жёлтый)
        "Ba2+-CrO42-": "N",    // Нерастворим (жёлтый)
        "Sr2+-CrO42-": "M",    // Малорастворим
        "Ca2+-CrO42-": "M",    // Малорастворим
        "Hg2+-CrO42-": "N",    // Нерастворим

        // === АЦЕТАТЫ (по умолчанию R) ===
        "Ag+-CH3COO-": "M",    // Малорастворим

        // === ПЕРМАНГАНАТЫ (все растворимы, исключений нет) ===

        // === ДИХРОМАТЫ (по умолчанию R) ===
        "Ag+-Cr2O72-": "M",    // Малорастворим (красный)
        "Pb2+-Cr2O72-": "M",   // Малорастворим (оранжевый)
        "Ba2+-Cr2O72-": "M",   // Малорастворим

        // === АЛЮМИНАТЫ (по умолчанию R — растворимы в щелочах) ===
        // Большинство катионов не образуют алюминаты, только щелочные металлы растворимы
        "H+-AlO2-": "D",       // Не существует (разложение)
        "Mg2+-AlO2-": "N",     // Нерастворим
        "Ca2+-AlO2-": "N",     // Нерастворим
        "Sr2+-AlO2-": "N",     // Нерастворим
        "Ba2+-AlO2-": "N",     // Нерастворим
        "Zn2+-AlO2-": "N",     // Нерастворим
        "Al3+-AlO2-": "D",     // Не существует
        "Fe2+-AlO2-": "N",     // Нерастворим
        "Fe3+-AlO2-": "N",     // Нерастворим
        "Cu2+-AlO2-": "N",     // Нерастворим
        "Ag+-AlO2-": "N",      // Нерастворим
        "Pb2+-AlO2-": "N",     // Нерастворим
        "Hg2+-AlO2-": "N",     // Нерастворим
        "Cr3+-AlO2-": "N",     // Нерастворим
        "Mn2+-AlO2-": "N",     // Нерастворим
        "Ni2+-AlO2-": "N",     // Нерастворим
        "Co2+-AlO2-": "N",     // Нерастворим
        "Sn2+-AlO2-": "N",     // Нерастворим

        // === ЦИНКАТЫ (по умолчанию R — растворимы в щелочах) ===
        "H+-ZnO22-": "D",      // Не существует (разложение)
        "Mg2+-ZnO22-": "N",    // Нерастворим
        "Ca2+-ZnO22-": "N",    // Нерастворим
        "Sr2+-ZnO22-": "N",    // Нерастворим
        "Ba2+-ZnO22-": "N",    // Нерастворим
        "Zn2+-ZnO22-": "D",    // Не существует
        "Al3+-ZnO22-": "N",    // Нерастворим
        "Fe2+-ZnO22-": "N",    // Нерастворим
        "Fe3+-ZnO22-": "N",    // Нерастворим
        "Cu2+-ZnO22-": "N",    // Нерастворим
        "Ag+-ZnO22-": "N",     // Нерастворим
        "Pb2+-ZnO22-": "N",    // Нерастворим
        "Hg2+-ZnO22-": "N",    // Нерастворим
        "Cr3+-ZnO22-": "N",    // Нерастворим
        "Mn2+-ZnO22-": "N",    // Нерастворим
        "Ni2+-ZnO22-": "N",    // Нерастворим
        "Co2+-ZnO22-": "N",    // Нерастворим
        "Sn2+-ZnO22-": "N",    // Нерастворим

        // === ПЛЮМБАТЫ (по умолчанию R — растворимы в щелочах) ===
        "H+-PbO22-": "D",      // Не существует (разложение)
        "Mg2+-PbO22-": "N",    // Нерастворим
        "Ca2+-PbO22-": "N",    // Нерастворим
        "Sr2+-PbO22-": "N",    // Нерастворим
        "Ba2+-PbO22-": "N",    // Нерастворим
        "Zn2+-PbO22-": "N",    // Нерастворим
        "Al3+-PbO22-": "N",    // Нерастворим
        "Fe2+-PbO22-": "N",    // Нерастворим
        "Fe3+-PbO22-": "N",    // Нерастворим
        "Cu2+-PbO22-": "N",    // Нерастворим
        "Ag+-PbO22-": "N",     // Нерастворим
        "Pb2+-PbO22-": "D",    // Не существует
        "Hg2+-PbO22-": "N",    // Нерастворим
        "Cr3+-PbO22-": "N",    // Нерастворим
        "Mn2+-PbO22-": "N",    // Нерастворим
        "Ni2+-PbO22-": "N",    // Нерастворим
        "Co2+-PbO22-": "N",    // Нерастворим
        "Sn2+-PbO22-": "N",    // Нерастворим

        // === ХРОМИТЫ (по умолчанию R — растворимы в щелочах) ===
        "H+-CrO2-": "D",       // Не существует (разложение)
        "Mg2+-CrO2-": "N",     // Нерастворим
        "Ca2+-CrO2-": "N",     // Нерастворим
        "Sr2+-CrO2-": "N",     // Нерастворим
        "Ba2+-CrO2-": "N",     // Нерастворим
        "Zn2+-CrO2-": "N",     // Нерастворим
        "Al3+-CrO2-": "N",     // Нерастворим
        "Fe2+-CrO2-": "N",     // Нерастворим
        "Fe3+-CrO2-": "N",     // Нерастворим
        "Cu2+-CrO2-": "N",     // Нерастворим
        "Ag+-CrO2-": "N",      // Нерастворим
        "Pb2+-CrO2-": "N",     // Нерастворим
        "Hg2+-CrO2-": "N",     // Нерастворим
        "Cr3+-CrO2-": "D",     // Не существует
        "Mn2+-CrO2-": "N",     // Нерастворим
        "Ni2+-CrO2-": "N",     // Нерастворим
        "Co2+-CrO2-": "N",     // Нерастворим
        "Sn2+-CrO2-": "N",     // Нерастворим

        // === СТАННАТЫ (по умолчанию R — растворимы в щелочах) ===
        "H+-SnO32-": "D",      // Не существует (разложение)
        "Mg2+-SnO32-": "N",    // Нерастворим
        "Ca2+-SnO32-": "N",    // Нерастворим
        "Sr2+-SnO32-": "N",    // Нерастворим
        "Ba2+-SnO32-": "N",    // Нерастворим
        "Zn2+-SnO32-": "N",    // Нерастворим
        "Al3+-SnO32-": "N",    // Нерастворим
        "Fe2+-SnO32-": "N",    // Нерастворим
        "Fe3+-SnO32-": "N",    // Нерастворим
        "Cu2+-SnO32-": "N",    // Нерастворим
        "Ag+-SnO32-": "N",     // Нерастворим
        "Pb2+-SnO32-": "N",    // Нерастворим
        "Hg2+-SnO32-": "N",    // Нерастворим
        "Cr3+-SnO32-": "N",    // Нерастворим
        "Mn2+-SnO32-": "N",    // Нерастворим
        "Ni2+-SnO32-": "N",    // Нерастворим
        "Co2+-SnO32-": "N",    // Нерастворим
        "Sn2+-SnO32-": "D"     // Не существует
    }
};

// Данные для ряда активности
const activityData = {
    metals: ["Li", "Rb", "K", "Ba", "Sr", "Ca", "Na", "Mg", "Al", "Mn", "Zn", "Cr", "Fe", "Cd", "Co", "Ni", "Sn", "Pb", "H", "Sb", "Bi", "Cu", "Hg", "Ag", "Pt", "Au"],
    nonMetals: ["F", "O", "N", "Cl", "Br", "I", "S", "C", "P", "Si"]
};

// =========================================
// РЕАКЦИИ РАЗЛОЖЕНИЯ НЕУСТОЙЧИВЫХ ВЕЩЕСТВ
// =========================================
const decompositionReactions = {
    // Гидроксиды
    "NH4+-OH-": {
        equation: "NH₄OH → NH₃↑ + H₂O",
        description: "Гидроксид аммония неустойчив, разлагается на аммиак и воду"
    },
    "Fe3+-OH-": {
        equation: "2Fe(OH)₃ →(t°) Fe₂O₃ + 3H₂O",
        description: "При нагревании теряет воду"
    },
    "Al3+-OH-": {
        equation: "2Al(OH)₃ →(t°) Al₂O₃ + 3H₂O",
        description: "Разлагается при прокаливании"
    },
    "Ag+-OH-": {
        equation: "2AgOH → Ag₂O + H₂O",
        description: "Неустойчив, мгновенно превращается в оксид серебра"
    },
    "Hg2+-OH-": {
        equation: "Hg(OH)₂ → HgO + H₂O",
        description: "Неустойчив, разлагается до оксида ртути"
    },

    // Карбонаты
    "H+-CO32-": {
        equation: "H₂CO₃ → H₂O + CO₂↑",
        description: "Угольная кислота неустойчива"
    },
    "NH4+-CO32-": {
        equation: "(NH₄)₂CO₃ →(t°) 2NH₃↑ + H₂O + CO₂↑",
        description: "Разлагается при нагревании"
    },
    "Al3+-CO32-": {
        equation: "Al₂(CO₃)₃ + 3H₂O → 2Al(OH)₃↓ + 3CO₂↑",
        description: "Гидролизуется водой"
    },
    "Cr3+-CO32-": {
        equation: "Cr₂(CO₃)₃ + 3H₂O → 2Cr(OH)₃↓ + 3CO₂↑",
        description: "Гидролизуется водой"
    },
    "Fe3+-CO32-": {
        equation: "Fe₂(CO₃)₃ + 3H₂O → 2Fe(OH)₃↓ + 3CO₂↑",
        description: "Гидролизуется водой"
    },

    // Сульфиты
    "Al3+-SO32-": {
        equation: "Al₂(SO₃)₃ + 3H₂O → 2Al(OH)₃↓ + 3SO₂↑",
        description: "Гидролизуется водой"
    },
    "Cr3+-SO32-": {
        equation: "Cr₂(SO₃)₃ + 3H₂O → 2Cr(OH)₃↓ + 3SO₂↑",
        description: "Гидролизуется водой"
    },
    "Fe3+-SO32-": {
        equation: "Fe₂(SO₃)₃ + 3H₂O → 2Fe(OH)₃↓ + 3SO₂↑",
        description: "Гидролизуется водой"
    },

    // Сульфиды (гидролизуемые)
    "Al3+-S2-": {
        equation: "Al₂S₃ + 6H₂O → 2Al(OH)₃↓ + 3H₂S↑",
        description: "Полностью гидролизуется водой"
    },
    "Cr3+-S2-": {
        equation: "Cr₂S₃ + 6H₂O → 2Cr(OH)₃↓ + 3H₂S↑",
        description: "Полностью гидролизуется водой"
    },
    "Fe3+-S2-": {
        equation: "Fe₂S₃ + 6H₂O → 2Fe(OH)₃↓ + 3H₂S↑",
        description: "Полностью гидролизуется водой"
    },
    "Mg2+-S2-": {
        equation: "MgS + 2H₂O → Mg(OH)₂↓ + H₂S↑",
        description: "Гидролизуется водой"
    },
    "Ca2+-S2-": {
        equation: "CaS + 2H₂O → Ca(OH)₂ + H₂S↑",
        description: "Гидролизуется водой"
    },
    "Sr2+-S2-": {
        equation: "SrS + 2H₂O → Sr(OH)₂ + H₂S↑",
        description: "Гидролизуется водой"
    },
    "Ba2+-S2-": {
        equation: "BaS + 2H₂O → Ba(OH)₂ + H₂S↑",
        description: "Гидролизуется водой"
    },

    // Гидросульфиды
    "Fe3+-HS-": {
        equation: "Fe(HS)₃ + 3H₂O → Fe(OH)₃↓ + 3H₂S↑",
        description: "Гидролизуется водой"
    },
    "Al3+-HS-": {
        equation: "Al(HS)₃ + 3H₂O → Al(OH)₃↓ + 3H₂S↑",
        description: "Гидролизуется водой"
    },
    "Cr3+-HS-": {
        equation: "Cr(HS)₃ + 3H₂O → Cr(OH)₃↓ + 3H₂S↑",
        description: "Гидролизуется водой"
    },
    "Sn2+-HS-": {
        equation: "Sn(HS)₂ + 2H₂O → Sn(OH)₂↓ + 2H₂S↑",
        description: "Гидролизуется водой"
    },

    // Силикаты
    "Al3+-SiO32-": {
        equation: "Al₂(SiO₃)₃ + 6H₂O → 2Al(OH)₃↓ + 3H₂SiO₃↓",
        description: "Гидролизуется водой"
    },
    "Cr3+-SiO32-": {
        equation: "Cr₂(SiO₃)₃ + 6H₂O → 2Cr(OH)₃↓ + 3H₂SiO₃↓",
        description: "Гидролизуется водой"
    },
    "Fe3+-SiO32-": {
        equation: "Fe₂(SiO₃)₃ + 6H₂O → 2Fe(OH)₃↓ + 3H₂SiO₃↓",
        description: "Гидролизуется водой"
    },

    // Алюминаты, цинкаты и др. (разложение водой)
    "H+-AlO2-": {
        equation: "HAlO₂ + H₂O → Al(OH)₃↓",
        description: "Гидролизуется с образованием гидроксида"
    },
    "H+-ZnO22-": {
        equation: "H₂ZnO₂ + H₂O → Zn(OH)₂↓",
        description: "Гидролизуется с образованием гидроксида"
    },
    "H+-PbO22-": {
        equation: "H₂PbO₂ → PbO₂ + H₂O",
        description: "Разлагается до оксида"
    },
    "H+-CrO2-": {
        equation: "HCrO₂ + H₂O → Cr(OH)₃↓",
        description: "Гидролизуется с образованием гидроксида"
    },
    "H+-SnO32-": {
        equation: "H₂SnO₃ + H₂O → Sn(OH)₄↓",
        description: "Гидролизуется с образованием гидроксида"
    },

    // Несуществующие соединения
    "Al3+-AlO2-": {
        equation: "—",
        description: "Соединение не может существовать (один и тот же элемент)"
    },
    "Zn2+-ZnO22-": {
        equation: "—",
        description: "Соединение не может существовать (один и тот же элемент)"
    },
    "Pb2+-PbO22-": {
        equation: "—",
        description: "Соединение не может существовать (один и тот же элемент)"
    },
    "Cr3+-CrO2-": {
        equation: "—",
        description: "Соединение не может существовать (один и тот же элемент)"
    },
    "Sn2+-SnO32-": {
        equation: "—",
        description: "Соединение не может существовать (один и тот же элемент)"
    },

    // Йодид меди (окислительно-восстановительная реакция)
    "Cu2+-I-": {
        equation: "2CuI₂ → 2CuI↓ + I₂",
        description: "Окислительно-восстановительная реакция"
    },

    // Фторид ртути
    "Hg2+-F-": {
        equation: "HgF₂ + H₂O → HgO + 2HF",
        description: "Гидролизуется с образованием оксида"
    }
};

// Делаем глобально доступным
window.decompositionReactions = decompositionReactions;

// Функция получения растворимости
function getSolubility(cationFormula, anionFormula) {
    // Нормализуем формулы для ключа
    const cationKey = normalizeFormula(cationFormula);
    const anionKey = normalizeFormula(anionFormula);
    const exceptionKey = `${cationKey}-${anionKey}`;

    // Сначала проверяем исключения
    if (solubilityData.exceptions[exceptionKey] !== undefined) {
        return solubilityData.exceptions[exceptionKey];
    }

    // Иначе возвращаем правило по умолчанию
    return solubilityData.defaults[anionKey] || "R";
}
